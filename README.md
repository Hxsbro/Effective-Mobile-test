Тестовое задание на должность системного аналитика
Кандидат: Темербеков Гумар
Задание 1: Анализ требований
  1.	Найдите и перечислите все логические противоречия и недочеты в предоставленном ТЗ. Объясните, в чем заключается проблема для каждого пункта. 

1.	Пункт 2 и пункт 9 противоречат друг другу. Так как согласно пункту 2, уменьшить до 0 нельзя (то есть минимальное значение = 1), но пункт 9 описывает ситуацию уменьшения до 0. Удаление должно происходить только через "отдельную кнопку" (пункт 2) или при доведении до 0? Требуется согласование. 
2.	Пункт 7 и Пункт 13 противоречат друг другу. Так как согласно пункту 7 фиксация цены – стандартная практика, но пункт 13 требует обновления цен. Это два взаимоисключающих подхода.
3.	Пункт 3 плохое объяснение условия. Не указано, как система должна реагировать при попытке добавить 6-ой уникальный товар. Блокировка всплывающим сообщением или иначе? Требуется конкретика. 
4.	Пункт 6 недосказанность. Какое именно ограничение сработало? По количеству уникальных товаров (пункт 3) или по общему количеству (пункт 4)? Пользователю неясно. Лучше уточнять в сообщении. 
5.	Пункт 10 и пункт 11 некорректная детализация. Какие конкретно продукты могут быть в рекламе? Нет четких временных ограничений. Не относятся к функционалу корзины. 
6.	Пункт 12 отсутствует. Неправильная нумерация либо удаление пункта, без исправления нумерации. 
7.	Пункт 13 хранение в корзине. Должна ли сохраняться корзина между сессиями или при смене устройства? 

  2. Предложите конкретные исправления для устранения этих противоречий - напишите свою версию этого фрагмента ТЗ, которая должна быть логически завершенной и непротиворечивой. 

1.	Лимит на ассортимент. В корзине одновременно может находиться не более 5 различных товарных позиций. 
2.	Лимит на общее количество. Суммарное количество всех единиц товаров в корзине не может превышать 20 штук. 
3.	Лимит на количество одной позиции. Для одной товарной позиции пользователь может установить количество от 1 до 10 единиц за одну операцию изменения. 
4.	При нажатии кнопки «Добавить в корзину» на странице товара, товар добавляется в корзину с количеством 1 единица.
5.	Если в корзине уже присутствует данный товар, его количество увеличивается на 1.
6.	Система проверяет соблюдение лимитов (пункты 1-3) перед фактическим добавлением.
7.	При любой попытке добавить товар или увеличить его количество система последовательно проверяет: 
7.1.	Не превысит ли это лимит в 5 различных товаров (если товар новый).
7.2.	Не превысит ли новое количество для данной позиции лимит в 10 единиц.
7.3.	Не превысит ли новое общее количество всех товаров лимит в 20 единиц.
Если любое из ограничений будет нарушено, операция не выполняется, и пользователю показывается соответствующее уведомление (см. пункт 8).
8.	При нарушении лимитов отображается точечное сообщение для пользователя: 
8.1.	«В корзине может быть не более 5 разных товаров» (при нарушении пункта 1). 
8.2.	«Максимальное количество для одного товара – 10 шт.» (при нарушении пункта 3). 
8.3.	«Максимальное количество товаров в корзине – 20 шт.» (при нарушении пункта 2). 
8.4.	Сообщение «Лимит корзины превышен» может использоваться как общий заголовок для таких уведомлений. 
9.	Управление количеством товара в корзине. На странице корзины для каждой позиции отображаются кнопки «-» и «+» для изменения количества, а также поле с текущим значением: нажатие «+» увеличивает количество на 1 с проверкой лимитов (пункт 2, пункт 3), нажатие на «-» уменьшает количество на 1. 
10.	Удаление товара. Если в результате уменьшения количество товара становится равным 0, товар немедленно удаляется из корзины. Альтернативный способ удаления – нажатие на отдельную кнопку «Удалить» (иконка корзины/крестик) рядом с позицией.
11.	Ценообразование в корзине. Цена товара фиксируется в момент его первого добавления в корзину пользователем и остается неизменной до момента оформления заказа, даже если цена в общем каталоге изменилась. Для товаров, уже находящихся в корзине пользователя на момент изменения цены в каталоге, цена не обновляется. Для товаров, добавленных в корзину после изменения цены в каталоге, действует новая цена.
12.	Для каждой позиции в корзине должны отображаться: 
12.1.	Название товара и его изображение.
12.2	Фиксированная цена за единицу.
12.3	Поле и кнопки для изменения количества.
12.4	Итоговая стоимость позиции, рассчитанная как: цена за единицу * количество.
12.5	Кнопка «Удалить» для полного удаления позиции.
12.6	Внизу страницы отображается Общая сумма заказа, рассчитанная как сумма итоговых стоимостей всех позиций.

  3. Какие уточняющие вопросы вы бы задали продукт-менеджеру или бизнес-заказчику по данному ТЗ? 

1.	По фиксации цены (главный конфликт пункт 7 и пункт 13):
«Мы видим прямое противоречие: цена должна фиксироваться или обновляться? Какой сценарий лучше подходит?
Вариант 1: Цена фиксируется при добавлении в корзину. Это стандарт, который защищает пользователя от повышения цены на этапе оформления. 
Вариант 2: Цена обновляется при изменении в каталоге, чтобы избежать продаж по старым ценам.
Вариант 3: Цена фиксируется, но при открытии корзины/оформлении заказа система показывает уведомление: «Цена на товар A изменилась. Актуальная цена: N» и предлагает обновить корзину.
Какой вариант утверждаем?»

2.	По удалению товара (пункт 2 и пункт 9):
«Как именно должен удаляться товар? Мы видим два варианта:
Вариант 1: Через отдельную кнопку «Удалить»
Вариант 2: Через уменьшение до нуля. 
Какой интерфейс и логика предпочтительнее с точки зрения UX?»

3.	«Что должно происходить с товаром в корзине, если:
3.1.	Товар был удален из каталога или скрыт?
3.2.	У товара закончился остаток на складе? 
Нужно ли помечать такие позиции, запрещать оформление заказа с ними или автоматически удалять из корзины?» 

4. «Требуется ли сохранять корзину для неавторизованных пользователей между сессиями (например, на несколько дней)? Или достаточно хранения в рамках одной сессии браузера?» 

5.	«Требования к рекламе выглядят как маркетинговые. Для разработки функционала корзины нам нужно знать только: где на макете страницы корзины зарезервировано место под динамический блок, в который будет загружаться внешний контент? Вся логика показа (по времени, дням) будет управляться внешней системой?»

1.	Написать пример REST API запроса, который будет вызываться при переходе пользователя на данный экран.

Ключевые параметры:
1.	Геолокация пользователя – для определения ближайшей доставки и магазина.
2.	Текущее время.
3.	ID пользователя/сессии – для учёта его предпочтений или истории.

Пример REST API запроса 1 (GET): 
GET /api/v1/partner-stores?lat=55.751244&lon=37.618423&timezone=Asia/Omsk
Host: api.petrushka.zelenaya
Authorization: Bearer <user_jwt_token>
Accept: application/json

Пример REST API запроса 2 (POST): 
POST /api/v1/partner-stores/nearby
Host: api.petrushka.zelenaya
Authorization: Bearer <user_jwt_token>
Content-Type: application/json
Accept: application/json

{
  "user_location": {
    "latitude": 52.714228,
    "longitude": 11.072001
  },
  "delivery_time_preference": "soonest", 
  "include_all_partners": false 
}
Latitude, longitude – геолокация пользователя. Необходимы для расчёта возможности доставки и времени.
Timezone – часовой пояс пользователя для корректного отображения времени.
Дополнительные параметры: delivery_time_preference (предпочтительные сроки доставки), include_all_partners (указание всех партнеров).

2.	Привести пример ответа этого REST API в соответствии с макетом. Формат - JSON. Учесть, что при клике на плашку магазина должен осуществляться переход по ссылке на внешний ресурс.

{
  "success": true,
  "stores": [
    {
      "id": "metro_001",
      "partner_name": "METRO",
      "display_name": "METRO",
      "logo_url": "https://cdn.petrushka.zelenaya/partners/metro/logo.png",
      "delivery_info": {
        "available": true,
        "type": "scheduled",
        "status_text": "Ближайшая доставка сегодня 21:00-23:00",
        "next_slot": {
          "date": "2026-01-14",
          "start_time": "21:00",
          "end_time": "23:00",
          "is_today": true
        },
        "delivery_speed_minutes": null
      },
      "metadata": {
        "sort_priority": 1,
        "distance_km": 2.1,
        "rating": 4.7
      },
      "action": {
        "type": "external_link",
        "url": "https://metro.petrushka.zelenaya/redirect?store_id=001&user_token={USER_TOKEN}",
        "method": "GET"
      },
      "visual_hints": {
        "badge": null,
        "highlighted": false
      }
    },
    {
      "id": "ashan_002",
      "partner_name": "Auchan",
      "display_name": "Ашан",
      "logo_url": "https://cdn.petrushka.zelenaya/partners/auchan/logo.png",
      "delivery_info": {
        "available": true,
        "type": "scheduled",
        "status_text": "Ближайшая доставка сегодня 18:00-20:00",
        "next_slot": {
          "date": "2026-01-14",
          "start_time": "18:00",
          "end_time": "20:00",
          "is_today": true
        },
        "delivery_speed_minutes": null
      },
      "metadata": {
        "sort_priority": 2,
        "distance_km": 1.5,
        "rating": 4.5
      },
      "action": {
        "type": "external_link",
        "url": "https://auchan.petrushka.zelenaya/launch?shop_id=002&partner_key=XYZ123",
        "method": "GET"
      },
      "visual_hints": {
        "badge": null,
        "highlighted": false
      }
    },
    {
      "id": "vkusvill_003",
      "partner_name": "VkusVill",
      "display_name": "ВкусВилл",
      "logo_url": "https://cdn.petrushka.zelenaya/partners/vkusvill/logo.png",
      "delivery_info": {
        "available": true,
        "type": "express",
        "status_text": "Быстрая доставка от 20 до 60 минут",
        "next_slot": null,
        "delivery_speed_minutes": {
          "min": 20,
          "max": 60
        }
      },
      "metadata": {
        "sort_priority": 3,
        "distance_km": 0.8,
        "rating": 4.9
      },
      "action": {
        "type": "external_link",
        "url": "vkusvill://partner.petrushka.zelenaya/store/003",
        "method": "DEEP_LINK",
        "fallback_url": "https://vkusvill.ru/petrushka/redirect?store=003"
      },
      "visual_hints": {
        "badge": "fast",
        "highlighted": true
      }
    },
    {
      "id": "victoria_004",
      "partner_name": "Victoria",
      "display_name": "ВИКТОРИЯ",
      "logo_url": "https://cdn.petrushka.zelenaya/partners/victoria/logo.png",
      "delivery_info": {
        "available": true,
        "type": "scheduled",
        "status_text": "Ближайшая доставка сегодня 17:00-19:00",
        "next_slot": {
          "date": "2026-01-14",
          "start_time": "17:00",
          "end_time": "19:00",
          "is_today": true
        },
        "delivery_speed_minutes": null
      },
      metadata: {
        "sort_priority": 4,
        "distance_km": 2.8,
        "rating": 4.3
      },
      "action": {
        "type": "external_link",
        "url": "https://victoria-market.ru/integration/petrushka?branch_id=004",
        "method": "GET"
      },
      "visual_hints": {
        "badge": null,
        "highlighted": false
      }
    }
  ],
  "user_context": {
    "location_detected": true,
    "coordinates": {
      "latitude": 52.714228,
      "longitude": 11.072001
    },
    "timezone": "Asia/Omsk",
    "current_time": "2026-01-14T09:41:00+06:00"
  }
}
1.	delivery_info.status_text – содержит готовый текст для отображения в интерфейсе, как показано в макете. 
2.	delivery_info.type – позволяет фронтенду стилизовать плашки по-разному:
"scheduled" – для магазинов с временными слотами;
"express" – для быстрой доставки.
3.	action – поле для реализации перехода:
type: "external_link" – указывает, что переход ведет вовне;
url – содержит полную ссылку для перехода;
method: "DEEP_LINK" – указание на попытку открыть мобильное приложение партнера с fallback_url на веб-версию;
Для безопасности в URL могут подставляться токены сессии ({USER_TOKEN}). 
4.	visual_hints – позволяет фронтенду добавить визуальные акценты:
badge: "fast" – для отображения бейджа «Быстро»;
highlighted: true – для выделения карточки. 
5.	Сортировка – магазины уже приходят отсортированными в порядке приоритета (sort_priority), соответствующем макету.  
6.	Контекст пользователя – содержит информацию о том, на основе каких данных был сформирован ответ (геолокация, время), что полезно для отладки и понимания логики работы. 
